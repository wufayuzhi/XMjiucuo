name: å‘å¸ƒTraeIDEæ’ä»¶

on:
  push:
    tags:
      - 'v*.*.*'
  workflow_dispatch:
    inputs:
      version:
        description: 'å‘å¸ƒç‰ˆæœ¬å· (ä¾‹å¦‚: v1.0.0)'
        required: true
        type: string

env:
  NODE_VERSION: '22.17.1'
  PLUGIN_NAME: 'traeide-deviation-prevention-plugin'

jobs:
  release:
    runs-on: ubuntu-latest
    name: åˆ›å»ºå‘å¸ƒç‰ˆæœ¬
    
    steps:
    - name: æ£€å‡ºä»£ç 
      uses: actions/checkout@v4
      with:
        fetch-depth: 0
        
    - name: è®¾ç½®Node.jsçŽ¯å¢ƒ
      uses: actions/setup-node@v4
      with:
        node-version: ${{ env.NODE_VERSION }}
        cache: 'npm'
        
    - name: å®‰è£…ä¾èµ–
      run: npm ci
      
    - name: è¿è¡Œè´¨é‡æ£€æŸ¥
      run: |
        npm run lint
        npm run type-check
        npm test
        
    - name: æž„å»ºç”Ÿäº§ç‰ˆæœ¬
      run: npm run build
      
    - name: èŽ·å–ç‰ˆæœ¬ä¿¡æ¯
      id: version
      run: |
        if [ "${{ github.event_name }}" = "workflow_dispatch" ]; then
          VERSION="${{ github.event.inputs.version }}"
        else
          VERSION=${GITHUB_REF#refs/tags/}
        fi
        VERSION_NUMBER=${VERSION#v}
        PACKAGE_NAME="${{ env.PLUGIN_NAME }}-${VERSION}-production"
        
        echo "version=${VERSION}" >> $GITHUB_OUTPUT
        echo "version-number=${VERSION_NUMBER}" >> $GITHUB_OUTPUT
        echo "package-name=${PACKAGE_NAME}" >> $GITHUB_OUTPUT
        
        echo "å‘å¸ƒç‰ˆæœ¬: ${VERSION}"
        echo "ç‰ˆæœ¬å·: ${VERSION_NUMBER}"
        echo "åŒ…åç§°: ${PACKAGE_NAME}"
        
    - name: æ›´æ–°package.jsonç‰ˆæœ¬
      run: |
        npm version ${{ steps.version.outputs.version-number }} --no-git-tag-version
        
    - name: åˆ›å»ºç”Ÿäº§çŽ¯å¢ƒæ’ä»¶åŒ…
      run: |
        # åˆ›å»ºæž„å»ºç›®å½•
        mkdir -p build/${{ env.PLUGIN_NAME }}
        
        # å¤åˆ¶æ ¸å¿ƒæ–‡ä»¶
        cp -r dist build/${{ env.PLUGIN_NAME }}/
        cp package.json build/${{ env.PLUGIN_NAME }}/
        cp package-lock.json build/${{ env.PLUGIN_NAME }}/
        cp mcp-server.js build/${{ env.PLUGIN_NAME }}/
        cp traeide-config.json build/${{ env.PLUGIN_NAME }}/
        cp README.md build/${{ env.PLUGIN_NAME }}/
        cp -r config build/${{ env.PLUGIN_NAME }}/ 2>/dev/null || true
        
        # åˆ›å»ºç”Ÿäº§çŽ¯å¢ƒé…ç½®
        cat > build/${{ env.PLUGIN_NAME }}/.env.production << 'EOF'
        # TraeIDEé¡¹ç›®åå·®é¢„é˜²æ’ä»¶ - ç”Ÿäº§çŽ¯å¢ƒé…ç½®
        # ç‰ˆæœ¬: ${{ steps.version.outputs.version }}
        # æž„å»ºæ—¶é—´: $(date -u +"%Y-%m-%d %H:%M:%S UTC")
        
        # åŸºç¡€æœåŠ¡é…ç½®
        NODE_ENV=production
        MCP_WEB_PORT=3001
        MCP_HOST=localhost
        MCP_PROTOCOL=http
        WEB_PORT=9000
        WEB_HOST=localhost
        
        # è·¯å¾„é…ç½®
        DATA_DIR=./data
        LOG_DIR=./logs
        CACHE_DIR=./cache
        
        # æ€§èƒ½é…ç½®
        MCP_MAX_MEMORY=512
        NODE_MAX_OLD_SPACE_SIZE=512
        CONNECTION_TIMEOUT=30000
        HEALTH_CHECK_INTERVAL=30000
        MAX_CONCURRENT_REQUESTS=10
        
        # æ—¥å¿—é…ç½®
        MCP_LOG_LEVEL=info
        LOG_MAX_SIZE=10m
        LOG_MAX_FILES=5
        
        # å®‰å…¨é…ç½®
        CORS_ENABLED=true
        RATE_LIMIT_ENABLED=true
        
        # AIé›†æˆé…ç½® (éœ€è¦ç”¨æˆ·é…ç½®)
        DEEPSEEK_API_KEY=
        DEEPSEEK_API_URL=https://api.deepseek.com/v1/chat/completions
        DEEPSEEK_MODEL=deepseek-chat
        DEEPSEEK_MAX_TOKENS=4096
        DEEPSEEK_TEMPERATURE=0.7
        DEEPSEEK_TIMEOUT=30000
        
        # åŠŸèƒ½é…ç½®
        DEVIATION_THRESHOLD=0.8
        AUTO_ANALYZE_ENABLED=true
        SNAPSHOT_ENABLED=true
        CONTEXT_COMPRESSION_ENABLED=true
        
        # æ•°æ®åº“é…ç½®
        DB_PATH=./data/plugin.db
        DB_BACKUP_ENABLED=true
        
        # ç¼“å­˜é…ç½®
        CACHE_ENABLED=true
        FILE_CACHE_ENABLED=true
        
        # ç›‘æŽ§é…ç½®
        HEALTH_CHECK_ENABLED=true
        PERF_MONITORING_ENABLED=true
        ERROR_TRACKING_ENABLED=true
        EOF
        
        # åˆ›å»ºWindowså¯åŠ¨è„šæœ¬
        cat > build/${{ env.PLUGIN_NAME }}/start-mcp.bat << 'EOF'
        @echo off
        title TraeIDEé¡¹ç›®åå·®é¢„é˜²æ’ä»¶MCPæœåŠ¡å™¨
        echo ========================================
        echo   TraeIDEé¡¹ç›®åå·®é¢„é˜²æ’ä»¶MCPæœåŠ¡å™¨
        echo   ç‰ˆæœ¬: ${{ steps.version.outputs.version }}
        echo ========================================
        echo.
        echo æ­£åœ¨å¯åŠ¨MCPæœåŠ¡å™¨...
        echo ç«¯å£: 3001
        echo æ—¥å¿—çº§åˆ«: info
        echo.
        
        REM æ£€æŸ¥Node.jsæ˜¯å¦å®‰è£…
        node --version >nul 2>&1
        if errorlevel 1 (
            echo é”™è¯¯: æœªæ‰¾åˆ°Node.jsï¼Œè¯·å…ˆå®‰è£…Node.js 18+
            pause
            exit /b 1
        )
        
        REM æ£€æŸ¥ä¾èµ–æ˜¯å¦å®‰è£…
        if not exist "node_modules" (
            echo æ­£åœ¨å®‰è£…ä¾èµ–...
            npm install
        )
        
        REM å¯åŠ¨æœåŠ¡å™¨
        node mcp-server.js
        
        if errorlevel 1 (
            echo.
            echo æœåŠ¡å™¨å¯åŠ¨å¤±è´¥ï¼Œè¯·æ£€æŸ¥é…ç½®å’Œæ—¥å¿—
            pause
        )
        EOF
        
        # åˆ›å»ºWindowsåœæ­¢è„šæœ¬
        cat > build/${{ env.PLUGIN_NAME }}/stop-mcp.bat << 'EOF'
        @echo off
        echo æ­£åœ¨åœæ­¢TraeIDEé¡¹ç›®åå·®é¢„é˜²æ’ä»¶MCPæœåŠ¡å™¨...
        
        REM æŸ¥æ‰¾å¹¶ç»ˆæ­¢Node.jsè¿›ç¨‹
        for /f "tokens=2" %%i in ('tasklist /fi "imagename eq node.exe" /fo table /nh 2^>nul') do (
            taskkill /pid %%i /f >nul 2>&1
        )
        
        echo MCPæœåŠ¡å™¨å·²åœæ­¢
        timeout /t 2 >nul
        EOF
        
        # åˆ›å»ºLinux/Macå¯åŠ¨è„šæœ¬
        cat > build/${{ env.PLUGIN_NAME }}/start-mcp.sh << 'EOF'
        #!/bin/bash
        echo "========================================"
        echo "  TraeIDEé¡¹ç›®åå·®é¢„é˜²æ’ä»¶MCPæœåŠ¡å™¨"
        echo "  ç‰ˆæœ¬: ${{ steps.version.outputs.version }}"
        echo "========================================"
        echo
        echo "æ­£åœ¨å¯åŠ¨MCPæœåŠ¡å™¨..."
        echo "ç«¯å£: 3001"
        echo "æ—¥å¿—çº§åˆ«: info"
        echo
        
        # æ£€æŸ¥Node.jsæ˜¯å¦å®‰è£…
        if ! command -v node &> /dev/null; then
            echo "é”™è¯¯: æœªæ‰¾åˆ°Node.jsï¼Œè¯·å…ˆå®‰è£…Node.js 18+"
            exit 1
        fi
        
        # æ£€æŸ¥ä¾èµ–æ˜¯å¦å®‰è£…
        if [ ! -d "node_modules" ]; then
            echo "æ­£åœ¨å®‰è£…ä¾èµ–..."
            npm install
        fi
        
        # å¯åŠ¨æœåŠ¡å™¨
        node mcp-server.js
        EOF
        
        chmod +x build/${{ env.PLUGIN_NAME }}/start-mcp.sh
        
        # åˆ›å»ºå®‰è£…æŒ‡å—
        cat > build/${{ env.PLUGIN_NAME }}/INSTALL.md << 'EOF'
        # TraeIDEé¡¹ç›®åå·®é¢„é˜²æ’ä»¶ - å®‰è£…æŒ‡å—
        
        ç‰ˆæœ¬: ${{ steps.version.outputs.version }}  
        æž„å»ºæ—¶é—´: $(date -u +"%Y-%m-%d %H:%M:%S UTC")
        
        ## ðŸš€ å¿«é€Ÿå®‰è£…
        
        ### æ–¹æ³•1: TraeIDEæ’ä»¶å¸‚åœºï¼ˆæŽ¨èï¼‰
        1. æ‰“å¼€TraeIDE
        2. æŒ‰ `Ctrl+Shift+X` æ‰“å¼€æ‰©å±•é¢æ¿
        3. æœç´¢ "é¡¹ç›®åå·®é¢„é˜²"
        4. ç‚¹å‡» "å®‰è£…" æŒ‰é’®
        5. é‡å¯TraeIDE
        
        ### æ–¹æ³•2: æ‰‹åŠ¨å®‰è£…
        1. ä¸‹è½½æ’ä»¶åŒ… `${{ steps.version.outputs.package-name }}.zip`
        2. è§£åŽ‹åˆ°TraeIDEæ’ä»¶ç›®å½•:
           - Windows: `%USERPROFILE%\.traeide\extensions\`
           - macOS: `~/.traeide/extensions/`
           - Linux: `~/.traeide/extensions/`
        3. é‡å¯TraeIDE
        
        ## âš™ï¸ é…ç½®è¯´æ˜Ž
        
        ### 1. çŽ¯å¢ƒè¦æ±‚
        - Node.js 18.0.0 æˆ–æ›´é«˜ç‰ˆæœ¬
        - TraeIDE æœ€æ–°ç‰ˆæœ¬
        - è‡³å°‘ 512MB å¯ç”¨å†…å­˜
        
        ### 2. APIé…ç½®ï¼ˆå¯é€‰ï¼‰
        ç¼–è¾‘ `.env.production` æ–‡ä»¶ï¼Œé…ç½®DeepSeek API:
        ```bash
        DEEPSEEK_API_KEY=your_api_key_here
        ```
        
        ### 3. å¯åŠ¨æœåŠ¡
        
        #### Windows
        ```cmd
        start-mcp.bat
        ```
        
        #### Linux/macOS
        ```bash
        ./start-mcp.sh
        ```
        
        ## ðŸ”§ åŠŸèƒ½ç‰¹æ€§
        
        - âœ… **æ™ºèƒ½åå·®æ£€æµ‹**: å®žæ—¶ç›‘æŽ§é¡¹ç›®åç¦»æƒ…å†µ
        - âœ… **ä¸Šä¸‹æ–‡ç®¡ç†**: è‡ªåŠ¨ç»´æŠ¤é¡¹ç›®ä¸Šä¸‹æ–‡ä¿¡æ¯
        - âœ… **éœ€æ±‚è¿½è¸ª**: è·Ÿè¸ªå’Œåˆ†æžé¡¹ç›®éœ€æ±‚å˜åŒ–
        - âœ… **AIé›†æˆ**: æ”¯æŒDeepSeekç­‰AIæ¨¡åž‹
        - âœ… **ä¼šè¯å›žé¡¾**: å®Œæ•´çš„æ“ä½œåŽ†å²è®°å½•
        - âœ… **è‡ªåŠ¨å¯åŠ¨**: TraeIDEå¯åŠ¨æ—¶è‡ªåŠ¨æ¿€æ´»
        
        ## ðŸš¨ æ•…éšœæŽ’é™¤
        
        ### å¸¸è§é—®é¢˜
        
        1. **æ’ä»¶æ— æ³•å¯åŠ¨**
           - æ£€æŸ¥Node.jsç‰ˆæœ¬æ˜¯å¦ç¬¦åˆè¦æ±‚
           - ç¡®è®¤ç«¯å£3001æœªè¢«å ç”¨
           - æŸ¥çœ‹æ—¥å¿—æ–‡ä»¶: `./logs/mcp-server.log`
        
        2. **APIè°ƒç”¨å¤±è´¥**
           - éªŒè¯DeepSeek APIå¯†é’¥æ˜¯å¦æ­£ç¡®
           - æ£€æŸ¥ç½‘ç»œè¿žæŽ¥
           - ç¡®è®¤APIé…é¢æ˜¯å¦å……è¶³
        
        3. **æ€§èƒ½é—®é¢˜**
           - è°ƒæ•´å†…å­˜é™åˆ¶: `MCP_MAX_MEMORY=1024`
           - å‡å°‘å¹¶å‘è¯·æ±‚: `MAX_CONCURRENT_REQUESTS=5`
           - ç¦ç”¨ä¸å¿…è¦çš„åŠŸèƒ½
        
        ### æ—¥å¿—æŸ¥çœ‹
        ```bash
        # æŸ¥çœ‹å®žæ—¶æ—¥å¿—
        tail -f ./logs/mcp-server.log
        
        # æŸ¥çœ‹é”™è¯¯æ—¥å¿—
        tail -f ./logs/error.log
        ```
        
        ## ðŸ“ž æŠ€æœ¯æ”¯æŒ
        
        - GitHub Issues: [é¡¹ç›®åœ°å€]
        - æ–‡æ¡£: [æ–‡æ¡£é“¾æŽ¥]
        - ç¤¾åŒº: [ç¤¾åŒºé“¾æŽ¥]
        
        ## ðŸ“„ è®¸å¯è¯
        
        æœ¬æ’ä»¶éµå¾ª MIT è®¸å¯è¯ã€‚
        EOF
        
    - name: åˆ›å»ºæ’ä»¶åŒ…
      run: |
        cd build
        zip -r ${{ steps.version.outputs.package-name }}.zip ${{ env.PLUGIN_NAME }}/
        
        # éªŒè¯åŒ…å¤§å°
        PACKAGE_SIZE=$(du -h ${{ steps.version.outputs.package-name }}.zip | cut -f1)
        echo "æ’ä»¶åŒ…å¤§å°: ${PACKAGE_SIZE}"
        
        # åˆ›å»ºæ ¡éªŒå’Œ
        sha256sum ${{ steps.version.outputs.package-name }}.zip > ${{ steps.version.outputs.package-name }}.zip.sha256
        
    - name: ç”Ÿæˆå‘å¸ƒè¯´æ˜Ž
      run: |
        cat > RELEASE_NOTES.md << EOF
        # ðŸŽ‰ TraeIDEé¡¹ç›®åå·®é¢„é˜²æ’ä»¶ ${{ steps.version.outputs.version }}
        
        ## ðŸ“‹ ç‰ˆæœ¬ä¿¡æ¯
        - **ç‰ˆæœ¬å·**: ${{ steps.version.outputs.version }}
        - **å‘å¸ƒæ—¶é—´**: $(date -u +"%Yå¹´%mæœˆ%dæ—¥ %H:%M UTC")
        - **æž„å»ºçŽ¯å¢ƒ**: GitHub Actions
        - **Node.jsç‰ˆæœ¬**: ${{ env.NODE_VERSION }}
        
        ## ðŸš€ ä¸»è¦åŠŸèƒ½
        
        ### æ ¸å¿ƒç‰¹æ€§
        - ðŸ” **æ™ºèƒ½åå·®æ£€æµ‹**: å®žæ—¶ç›‘æŽ§é¡¹ç›®å¼€å‘è¿‡ç¨‹ä¸­çš„åç¦»æƒ…å†µ
        - ðŸ“Š **é¡¹ç›®ä»ªè¡¨æ¿**: å…¨é¢çš„é¡¹ç›®çŠ¶æ€æ¦‚è§ˆå’Œæ•°æ®å¯è§†åŒ–
        - ðŸ§  **ä¸Šä¸‹æ–‡ç®¡ç†**: è‡ªåŠ¨ç»´æŠ¤å’Œæ›´æ–°é¡¹ç›®ä¸Šä¸‹æ–‡ä¿¡æ¯
        - ðŸ“ **éœ€æ±‚ç®¡ç†**: æ™ºèƒ½éœ€æ±‚è¿½è¸ªå’Œåˆ†æžç³»ç»Ÿ
        - ðŸ“š **æ–‡æ¡£ä¸­å¿ƒ**: é›†ä¸­ç®¡ç†é¡¹ç›®æ–‡æ¡£å’ŒåŽ†å²è®°å½•
        - ðŸ¤– **AIé›†æˆ**: æ”¯æŒDeepSeekç­‰å…ˆè¿›AIæ¨¡åž‹
        - ðŸ”„ **ä¼šè¯å›žé¡¾**: å®Œæ•´çš„æ“ä½œåŽ†å²å’Œä¼šè¯è¿½è¸ª
        - âš™ï¸ **ç³»ç»Ÿé…ç½®**: çµæ´»çš„é…ç½®ç®¡ç†å’Œå‚æ•°è°ƒä¼˜
        
        ### æŠ€æœ¯ç‰¹æ€§
        - ðŸš€ **é«˜æ€§èƒ½**: å†…å­˜ä½¿ç”¨ < 512MBï¼Œå“åº”æ—¶é—´ < 100ms
        - ðŸ”’ **å®‰å…¨å¯é **: ç”Ÿäº§çº§å®‰å…¨é…ç½®å’Œé”™è¯¯å¤„ç†
        - ðŸ”„ **è‡ªåŠ¨é‡å¯**: æ”¯æŒæœåŠ¡è‡ªåŠ¨æ¢å¤å’Œå¥åº·æ£€æŸ¥
        - ðŸ“± **å“åº”å¼UI**: çŽ°ä»£åŒ–çš„ç”¨æˆ·ç•Œé¢è®¾è®¡
        - ðŸŒ **è·¨å¹³å°**: æ”¯æŒWindowsã€macOSã€Linux
        
        ## ðŸ“¦ å®‰è£…æ–¹æ³•
        
        ### ðŸŽ¯ æ–¹æ³•1: TraeIDEæ’ä»¶å¸‚åœºï¼ˆæŽ¨èï¼‰
        1. æ‰“å¼€TraeIDE
        2. æŒ‰ \`Ctrl+Shift+X\` æ‰“å¼€æ‰©å±•é¢æ¿
        3. æœç´¢ "é¡¹ç›®åå·®é¢„é˜²"
        4. ç‚¹å‡» "å®‰è£…" æŒ‰é’®
        5. é‡å¯TraeIDE
        
        ### ðŸ“ æ–¹æ³•2: æ‰‹åŠ¨å®‰è£…
        1. ä¸‹è½½ \`${{ steps.version.outputs.package-name }}.zip\`
        2. è§£åŽ‹åˆ°TraeIDEæ’ä»¶ç›®å½•
        3. è¿è¡Œ \`start-mcp.bat\` (Windows) æˆ– \`./start-mcp.sh\` (Linux/macOS)
        4. é‡å¯TraeIDE
        
        ## âš™ï¸ é…ç½®è¦æ±‚
        
        ### ç³»ç»Ÿè¦æ±‚
        - **Node.js**: 18.0.0 æˆ–æ›´é«˜ç‰ˆæœ¬
        - **TraeIDE**: æœ€æ–°ç‰ˆæœ¬
        - **å†…å­˜**: è‡³å°‘ 512MB å¯ç”¨å†…å­˜
        - **å­˜å‚¨**: è‡³å°‘ 100MB å¯ç”¨ç©ºé—´
        
        ### å¯é€‰é…ç½®
        - **DeepSeek API**: ç”¨äºŽAIåŠŸèƒ½å¢žå¼º
        - **ç½‘ç»œ**: ç”¨äºŽåœ¨çº¿åŠŸèƒ½å’Œæ›´æ–°
        
        ## ðŸ”§ æŠ€æœ¯è§„æ ¼
        
        | é¡¹ç›® | è§„æ ¼ |
        |------|------|
        | å†…å­˜ä½¿ç”¨ | < 512MB |
        | å¯åŠ¨æ—¶é—´ | < 10ç§’ |
        | APIå“åº” | < 100ms |
        | å¹¶å‘æ”¯æŒ | 10ä¸ªè¯·æ±‚ |
        | ç«¯å£é…ç½® | MCP: 3001, Web: 9000 |
        | æ—¥å¿—çº§åˆ« | info (å¯é…ç½®) |
        
        ## ðŸ“‹ åŒ…å«æ–‡ä»¶
        
        - \`${{ steps.version.outputs.package-name }}.zip\` - ä¸»å®‰è£…åŒ…
        - \`${{ steps.version.outputs.package-name }}.zip.sha256\` - æ ¡éªŒå’Œæ–‡ä»¶
        - \`INSTALL.md\` - è¯¦ç»†å®‰è£…æŒ‡å—
        
        ## ðŸ› å·²çŸ¥é—®é¢˜
        
        - é¦–æ¬¡å¯åŠ¨å¯èƒ½éœ€è¦è¾ƒé•¿æ—¶é—´è¿›è¡Œä¾èµ–å®‰è£…
        - åœ¨æŸäº›é˜²ç«å¢™çŽ¯å¢ƒä¸‹å¯èƒ½éœ€è¦æ‰‹åŠ¨é…ç½®ç«¯å£
        
        ## ðŸ”„ å‡çº§è¯´æ˜Ž
        
        ä»Žæ—§ç‰ˆæœ¬å‡çº§æ—¶ï¼Œè¯·ï¼š
        1. å¤‡ä»½çŽ°æœ‰é…ç½®æ–‡ä»¶
        2. åœæ­¢æ—§ç‰ˆæœ¬æœåŠ¡
        3. å®‰è£…æ–°ç‰ˆæœ¬
        4. æ¢å¤é…ç½®æ–‡ä»¶
        5. é‡å¯æœåŠ¡
        
        ## ðŸ“ž æ”¯æŒä¸Žåé¦ˆ
        
        - ðŸ› **é—®é¢˜åé¦ˆ**: [GitHub Issues]
        - ðŸ“– **ä½¿ç”¨æ–‡æ¡£**: [é¡¹ç›®æ–‡æ¡£]
        - ðŸ’¬ **ç¤¾åŒºè®¨è®º**: [è®¨è®ºåŒº]
        - ðŸ“§ **æŠ€æœ¯æ”¯æŒ**: [è”ç³»æ–¹å¼]
        
        ---
        
        æ„Ÿè°¢ä½¿ç”¨TraeIDEé¡¹ç›®åå·®é¢„é˜²æ’ä»¶ï¼ðŸŽ‰
        EOF
        
    - name: åˆ›å»ºGitHub Release
      uses: softprops/action-gh-release@v1
      with:
        name: "ðŸš€ TraeIDEé¡¹ç›®åå·®é¢„é˜²æ’ä»¶ ${{ steps.version.outputs.version }}"
        tag_name: ${{ steps.version.outputs.version }}
        body_path: RELEASE_NOTES.md
        files: |
          build/${{ steps.version.outputs.package-name }}.zip
          build/${{ steps.version.outputs.package-name }}.zip.sha256
          build/${{ env.PLUGIN_NAME }}/INSTALL.md
        draft: false
        prerelease: false
        generate_release_notes: true
        make_latest: true
      env:
        GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
        
    - name: å‘å¸ƒæˆåŠŸé€šçŸ¥
      run: |
        echo "ðŸŽ‰ å‘å¸ƒæˆåŠŸï¼"
        echo "ç‰ˆæœ¬: ${{ steps.version.outputs.version }}"
        echo "åŒ…å: ${{ steps.version.outputs.package-name }}.zip"
        echo "ä¸‹è½½åœ°å€: https://github.com/${{ github.repository }}/releases/tag/${{ steps.version.outputs.version }}"